window.__require=function t(o,e,n){function i(r,c){if(!e[r]){if(!o[r]){var l=r.split("/");if(l=l[l.length-1],!o[l]){var a="function"==typeof __require&&__require;if(!c&&a)return a(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var p=e[r]={exports:{}};o[r][0].call(p.exports,function(t){return i(o[r][1][t]||t)},p,p.exports,t,o,e,n)}return e[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({nativeBannerForm:[function(t,o,e){"use strict";cc._RF.push(o,"3cb52BpvldEUbndqFf+8EwR","nativeBannerForm");var n,i=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),s=this&&this.__decorate||function(t,o,e,n){var i,s=arguments.length,r=s<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,o,e,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(o,e,r):i(o,e))||r);return s>3&&r&&Object.defineProperty(o,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=t("../../script/framework/ui/UIForm"),c=t("../../script/framework/utils/Common"),l=cc._decorator,a=l.ccclass,p=l.property,d=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.img=null,o.title=null,o.bannerBtn=null,o.closeBtn=null,o.btnNext=null,o.desc=null,o.mBackCall=null,o.isJumpAd=!1,o}return i(o,t),o.prototype.addCallback=function(t){this.mBackCall=t},o.prototype.onBack=function(){this.mBackCall&&this.mBackCall()},o.prototype.start=function(){t.prototype.start.call(this)},o.prototype.onShow=function(t){var o=this;this.isJumpAd=!1,this.img&&this.img.on(cc.Node.EventType.TOUCH_END,this.onImgClick,this),this.closeBtn&&this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onAdClose,this),this.bannerBtn&&this.bannerBtn.on(cc.Node.EventType.TOUCH_END,this.onImgClick,this),this.btnNext&&this.btnNext.on(cc.Node.EventType.TOUCH_END,this.onClose,this),moosnow.http.getAllConfig(function(t){if(t&&1==t.mx_native_click_switch?(o.btnNext.active=!1,o.bannerBtn.active=!0):(o.btnNext.active=!0,o.bannerBtn.active=!1),t)if(0==t.mx_ysgggbaj)o.closeBtn.active=!0;else if(-1==t.mx_ysgggbaj)o.closeBtn.active=!1;else if(1==t.mx_ysgggbaj)o.closeBtn.active=!0,o.isJumpAd=!0;else if(t.mx_ysgggbaj>=2&&t.mx_ysgggbaj<=10){var e=t.mx_ysgggbaj;o.isJumpAd=!0,o.scheduleOnce(function(){o.closeBtn.active=!0},e)}else t.mx_ysgggbaj>10&&(o.closeBtn.active=!0,c.default.randomNumBoth(0,100)>t.mx_ysgggbaj?o.isJumpAd=!1:o.isJumpAd=!0)}),t&&t.callback?this.addCallback(t.callback):this.addCallback(null),this.loadAd()},o.prototype.onImgClick=function(){moosnow.platform.clickNative(function(){}),this.onClose()},o.prototype.onAdClick=function(){moosnow.platform.clickNative(function(){}),this.onClose()},o.prototype.onAdClose=function(){this.isJumpAd&&moosnow.platform.clickNative(function(){}),this.onClose()},o.prototype.onClose=function(){var t=this;Lite.ui.hideUIForm(this.node.name,null,function(){t.onBack()})},o.prototype.loadAd=function(){var t=this;moosnow.platform.showNativeAd(function(o){console.log("\u539f\u751f\u5e7f\u544a",o),o&&(o.imgUrlList&&o.imgUrlList.length>0||o.icon)?(t.loadSrc(o.icon||o.imgUrlList[0],t.img),t.title&&(t.title.string=o.title||""),t.desc&&(t.desc.string=o.desc||"")):t.onClose()})},o.prototype.loadSrc=function(t,o){cc.loader.load(t,function(t,e){if(!t){var n=new cc.SpriteFrame(e);o.getComponent(cc.Sprite).spriteFrame=n}})},s([p(cc.Node)],o.prototype,"img",void 0),s([p(cc.Label)],o.prototype,"title",void 0),s([p(cc.Node)],o.prototype,"bannerBtn",void 0),s([p(cc.Node)],o.prototype,"closeBtn",void 0),s([p(cc.Node)],o.prototype,"btnNext",void 0),s([p(cc.Label)],o.prototype,"desc",void 0),s([a],o)}(r.default);e.default=d,cc._RF.pop()},{"../../script/framework/ui/UIForm":void 0,"../../script/framework/utils/Common":void 0}],nativeForm:[function(t,o,e){"use strict";cc._RF.push(o,"1fc1d/IDpZMtraxY7y6ithY","nativeForm");var n,i=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),s=this&&this.__decorate||function(t,o,e,n){var i,s=arguments.length,r=s<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,o,e,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(o,e,r):i(o,e))||r);return s>3&&r&&Object.defineProperty(o,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=t("../../script/framework/utils/Common"),c=t("../../script/framework/utils/FrameworkEvent"),l=t("../../script/framework/ui/UIForm"),a=t("../../script/config/UIForms"),p=cc._decorator,d=p.ccclass,u=p.property,m=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.mask=null,o.baseBox=null,o.logo=null,o.btnTopClose=null,o.btnClose=null,o.btnOpen=null,o.txtMemo=null,o.isJumpAd=!1,o.noAdClosed=!0,o}return i(o,t),o.prototype.willShow=function(o){var e=this;t.prototype.willShow.call(this,o),console.log("\u65b0\u7684\u4e00\u6b21\u6253\u5f00\u539f\u751f\u754c\u9762\u3002\u3002\u3002\u3002\u3002\u3002-------------"),this.noAdClosed=!0,moosnow.event.sendEventImmediately(c.default.HIDE_TRANSITION,null),this.logo.spriteFrame=null,this.txtMemo.string="",this.btnTopClose.active=!1,this.isJumpAd=!1,this.addListener();var n=Lite.config;if(!n||n.isLimitArea,n&&1==n.mx_native_click_switch?(this.btnOpen.active=!0,this.btnClose.active=!1):(this.btnOpen.active=!1,this.btnClose.active=!0),n)if(0==n.mx_ysgggbaj)this.btnTopClose.active=!0;else if(-1==n.mx_ysgggbaj)this.btnTopClose.active=!1;else if(1==n.mx_ysgggbaj)this.btnTopClose.active=!0,this.isJumpAd=!0;else if(n.mx_ysgggbaj>=2&&n.mx_ysgggbaj<=10){var i=n.mx_ysgggbaj;this.isJumpAd=!0,this.scheduleOnce(function(){e.btnTopClose.active=!0},i)}else n.mx_ysgggbaj>10&&(this.btnTopClose.active=!0,r.default.randomNumBoth(0,100)>n.mx_ysgggbaj?this.isJumpAd=!1:this.isJumpAd=!0);moosnow.platform.showNativeAd(function(t){if(t?console.log("\u539f\u751f\u5e7f\u544a111111------------",t.desc,t.imgUrlList[0],t.logoUrl,t.icon,t.title,t.imgUrlList):console.log("\u539f\u751f\u5e7f\u544a111111 \u8fd4\u56de\u7a7a------------"),t&&(t.imgUrlList&&t.imgUrlList.length>0||t.icon)){e.txtMemo.string=t.desc;var o=t.imgUrlList[0]||t.icon;cc.loader.load(o,function(o,n){if(!o){console.log("native img  url ",t.creativeType,n.url);var i=new cc.SpriteFrame(n);e.logo.spriteFrame=i}})}else e.isJumpAd=!1,console.log("\u8fd4\u56de\u3002\u3002\u3002null  -----nativeForm callback",e.isJumpAd,e.noAdClosed),console.log("\u8fd4\u56de\u3002\u3002\u3002null  \u5173\u95ed\u3002\u3002\u3002nativeForm",e.isJumpAd,e.noAdClosed),r.default.isFunction(e.FormData.callback)&&e.FormData.callback(),Lite.ui.hideUIForm(a.default.NativeForm,null)})},o.prototype.onShow=function(){this.mask.active=!0,this.node.zIndex=999,Lite.ui.hasUIForm(a.default.HomeForm)||Lite.ui.hasUIForm(a.default.GameForm)||moosnow.platform.showBanner(!1,function(){},moosnow.BANNER_HORIZONTAL.CENTER,moosnow.BANNER_VERTICAL.BOTTOM)},o.prototype.willHide=function(){this.remoteListener(),moosnow.platform.hideBanner()},o.prototype.addListener=function(){this.logo.node.on(cc.Node.EventType.TOUCH_END,this.onOpenAd,this),this.btnOpen.on(cc.Node.EventType.TOUCH_END,this.onOpenAd,this),this.btnTopClose.on(cc.Node.EventType.TOUCH_END,this.onCloseAd,this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onCloseAd1,this),moosnow.event.addListener(moosnow.PLATFORM_EVENT.NO_NATIVE_OR_ERROR,this,this.onNoNativeAdCallBack)},o.prototype.onNoNativeAdCallBack=function(t){this.noAdClosed=t,console.log("\u76d1\u542c\u5230\u4e86  onNoNativeAdCallBack ",this.noAdClosed,t)},o.prototype.remoteListener=function(){this.logo.node.off(cc.Node.EventType.TOUCH_END,this.onOpenAd,this),this.btnOpen.off(cc.Node.EventType.TOUCH_END,this.onOpenAd,this),this.btnTopClose.off(cc.Node.EventType.TOUCH_END,this.onCloseAd,this),this.btnClose.off(cc.Node.EventType.TOUCH_END,this.onCloseAd1,this),moosnow.event.removeListener(moosnow.PLATFORM_EVENT.NO_NATIVE_OR_ERROR,this)},o.prototype.onOpenAd=function(){var t=this;console.log("\u70b9\u51fb\u4e86\u3002\u3002\u3002\u6253\u5f00   nativeform-----------",this.noAdClosed),this.noAdClosed?this.onCloseAd1():moosnow.platform.clickNative(function(){moosnow.event.sendEventImmediately(c.default.HIDE_TRANSITION,null),t.onCloseAd1()})},o.prototype.onCloseAd=function(){console.log("\u70b9\u51fb\u4e86\u3002\u3002\u3002\u5173\u95ed   nativeform-----------",this.isJumpAd,this.noAdClosed),this.isJumpAd&&0==this.noAdClosed?this.onOpenAd():this.onCloseAd1()},o.prototype.onCloseAd1=function(){r.default.isFunction(this.FormData.callback)&&this.FormData.callback(),Lite.ui.hideUIForm(a.default.NativeForm,null),console.log("\u771f\u7684\u5173\u95ed\u3002\u3002\u3002\u3002\u3002onCloseAd1---55555555555555-------"),Lite.ui.hasUIForm(a.default.HomeForm)||Lite.ui.hasUIForm(a.default.GameForm)||moosnow.platform.hideBanner()},s([u(cc.Node)],o.prototype,"mask",void 0),s([u(cc.Sprite)],o.prototype,"baseBox",void 0),s([u(cc.Sprite)],o.prototype,"logo",void 0),s([u(cc.Node)],o.prototype,"btnTopClose",void 0),s([u(cc.Node)],o.prototype,"btnClose",void 0),s([u(cc.Node)],o.prototype,"btnOpen",void 0),s([u(cc.Label)],o.prototype,"txtMemo",void 0),s([d],o)}(l.default);e.default=m,cc._RF.pop()},{"../../script/config/UIForms":void 0,"../../script/framework/ui/UIForm":void 0,"../../script/framework/utils/Common":void 0,"../../script/framework/utils/FrameworkEvent":void 0}]},{},["nativeBannerForm","nativeForm"]);